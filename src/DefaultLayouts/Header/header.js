import { button } from "../../components/Button/button.js";
import { Authentication } from "../../fetchData/authentication.js";
import { User } from "../../fetchData/user.js";
import sheet from "./header.css" assert { type: "css" };
document.adoptedStyleSheets.push(sheet);
const LoggedIn = () => {
  const header_TopBar_Container_User = document.createElement("div");
  header_TopBar_Container_User.className = "header_TopBar_Container_User";
  header_TopBar_Container_User.innerHTML = `
  <a href="/profile" style="left : -30px" data-link><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M11.8575 11.6341C13.181 11.6341 14.327 11.1594 15.2635 10.2228C16.1998 9.28636 16.6747 8.14058 16.6747 6.81689C16.6747 5.49365 16.2 4.34771 15.2634 3.41098C14.3268 2.4747 13.1809 2 11.8575 2C10.5338 2 9.388 2.4747 8.45157 3.41113C7.51514 4.34756 7.04028 5.49349 7.04028 6.81689C7.04028 8.14058 7.51514 9.28652 8.45157 10.2229C9.3883 11.1592 10.5342 11.6341 11.8575 11.6341V11.6341ZM9.28042 4.23983C9.99896 3.5213 10.8418 3.17203 11.8575 3.17203C12.8729 3.17203 13.716 3.5213 14.4347 4.23983C15.1532 4.95852 15.5026 5.80157 15.5026 6.81689C15.5026 7.83251 15.1532 8.6754 14.4347 9.39409C13.716 10.1128 12.8729 10.4621 11.8575 10.4621C10.8422 10.4621 9.99926 10.1126 9.28042 9.39409C8.56173 8.67556 8.21231 7.83251 8.21231 6.81689C8.21231 5.80157 8.56173 4.95852 9.28042 4.23983Z" fill="white"></path>
  <path d="M20.2863 17.379C20.2592 16.9893 20.2046 16.5642 20.1242 
  16.1153C20.043 15.663 19.9385 15.2354 19.8134 14.8447C19.684 14.4408 19.5084 14.0419 19.2909 13.6597C19.0656 13.2629 18.8007 12.9175 18.5034 12.6332C18.1926 12.3358 17.812 12.0967 17.372 11.9223C16.9334 11.7488 16.4475 11.6609 15.9276 11.6609C15.7234 11.6609 15.526 11.7447 15.1447 11.9929C14.91 12.146 14.6355 12.323 14.3291 12.5188C14.0671 12.6857 13.7122 12.8421 13.2738 12.9837C12.8461 13.1221 12.4118 13.1923 11.983 13.1923C11.5546 13.1923 11.1203 13.1221 10.6923 12.9837C10.2544 12.8423 9.89931 12.6859 9.63778 12.5189C9.33428 12.325 9.05962 12.148 8.82143 11.9928C8.44042 11.7445 8.24297 11.6608 8.03881 11.6608C7.51879 11.6608 7.03295 11.7488 6.59457 11.9225C6.15481 12.0966 5.77411 12.3357 5.46298 12.6334C5.16574 12.9178 4.90085 13.2631 4.67563 13.6597C4.45849 14.0419 4.28271 14.4406 4.15332 14.8448C4.02835 15.2356 3.92383 15.663 3.84265 16.1153C3.76208 16.5636 3.70761 16.9888 3.6806 17.3794C3.65405 17.7614 3.64062 18.1589 3.64062 18.5605C3.64062 19.6045 3.9725 20.4497 4.62695 21.073C5.27331 21.6881 6.12841 21.9999 7.1686 21.9999H16.7987C17.8386 21.9999 18.6937 21.6881 19.3402 21.073C19.9948 20.4501 20.3267 19.6046 20.3267 18.5603C20.3265 18.1573 20.313 17.7598 20.2863 17.379V17.379ZM18.5321 20.2238C18.105 20.6303 17.538 20.8279 16.7986 20.8279H7.1686C6.42901 20.8279 5.862 20.6303 5.43506 20.224C5.0162 19.8253 4.81265 19.281 4.81265 18.5605C4.81265 18.1857 4.82501 17.8157 4.84973 17.4605C4.87384 17.112 4.92312 16.7291 4.99621 16.3223C5.06839 15.9206 5.16025 15.5435 5.2695 15.2022C5.37433 14.8749 5.5173 14.5508 5.69461 14.2386C5.86383 13.941 6.05853 13.6858 6.27337 13.4801C6.47433 13.2877 6.72763 13.1302 7.02609 13.0121C7.30212 12.9028 7.61233 12.843 7.94909 12.834C7.99013 12.8558 8.06322 12.8975 8.18163 12.9747C8.42257 13.1317 8.70028 13.3108 9.00728 13.5069C9.35335 13.7276 9.79921 13.9268 10.3319 14.0988C10.8765 14.2749 11.4319 14.3643 11.9832 14.3643C12.5345 14.3643 13.0901 14.2749 13.6344 14.099C14.1675 13.9267 14.6132 13.7276 14.9597 13.5066C15.2739 13.3058 15.5438 13.1319 15.7848 12.9747C15.9032 12.8976 15.9763 12.8558 16.0173 12.834C16.3542 12.843 16.6644 12.9028 16.9406 13.0121C17.2389 13.1302 17.4922 13.2878 17.6932 13.4801C17.908 13.6856 18.1027 13.9409 18.2719 14.2387C18.4494 14.5508 18.5925 14.875 18.6972 15.202C18.8066 15.5438 18.8986 15.9207 18.9706 16.3222C19.0436 16.7297 19.093 17.1127 19.1171 17.4606V17.4609C19.142 17.8148 19.1545 18.1846
   19.1547 18.5605C19.1545 19.2811 18.951 19.8253 18.5321 20.2238V20.2238Z" fill="white">
  </path>
</svg></a>
  <div class="login"></div>
  <span style="color: aliceblue; margin: 0 3px; font-size: 18px"
    >/</span
  >
  <div class="register"></div>
<div
  style="
    width: 1px;
    height: 22px;
    background-color: #fff;
    margin : 0 10px
  "
></div>
  <a href="/cart" style="left:165px">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
        <g clip-path="url(#clip0_2_75)">
          <path d="M19.7031 7.22905C19.439 6.89772 19.0428 6.70764 18.616 6.70764H14.7643L12.6756 1.9251C12.5461 1.62858 12.2007 1.49307 11.9042 1.62264C11.6076 1.75213 11.4722 2.09756 11.6017 2.39412L13.4855 6.70768H6.51449L8.39828 2.39412C8.52778 2.09756 8.39238 1.75217 8.09582 1.62264C7.7993 1.49307 7.45387 1.6285 7.32438 1.9251L5.23574 6.70768H1.38403C0.957229 6.70768 0.561018 6.89772 0.296916 7.22909C0.0376587 7.5544 -0.0580053 7.9726 0.0344556 8.37659L2.09137 17.361C2.235 17.9883 2.78996 18.4264 3.44094 18.4264H16.5591C17.21 18.4264 17.765 17.9883 17.9086 17.361L19.9655 8.37655C20.058 7.97256 19.9623 7.55436 19.7031 7.22905ZM16.5591 17.2545H3.44094C3.34145 17.2545 3.2543 17.1893 3.23371 17.0994L1.1768 8.11506C1.16067 8.04456 1.18774 7.99151 1.21336 7.95944C1.23711 7.9296 1.2909 7.87956 1.38403 7.87956H4.72399L4.57051 8.231C4.44102 8.52757 4.57641 8.87296 4.87297 9.00249C4.9493 9.03585 5.02883 9.05163 5.10715 9.05163C5.33301 9.05163 5.54824 8.92026 5.64442 8.70007L6.00274 7.87964H13.9973L14.3557 8.70007C14.4518 8.9203 14.6671 9.05163 14.8929 9.05163C14.9712 9.05163 15.0508 9.03585 15.1271 9.00249C15.4237 8.87299 15.5591 8.52757 15.4296 8.231L15.2761 7.87956H18.6161C18.7092 7.87956 18.763 7.9296 18.7867 7.95944C18.8123 7.99155 18.8394 8.0446 18.8233 8.11503L16.7664 17.0994C16.7457 17.1893 16.6586 17.2545 16.5591 17.2545Z" fill="white"></path>
          <path d="M6.48438 10.4186C6.16078 10.4186 5.89844 10.6809 5.89844 11.0045V15.3014C5.89844 15.625 6.16078 15.8873 6.48438 15.8873C6.80797 15.8873 7.07031 15.625 7.07031 15.3014V11.0045C7.07031 10.6809 6.80801 10.4186 6.48438 10.4186Z" fill="white"></path>
          <path d="M10 10.4186C9.67641 10.4186 9.41406 10.6809 9.41406 11.0045V15.3014C9.41406 15.625 9.67641 15.8873 10 15.8873C10.3236 15.8873 10.5859 15.625 10.5859 15.3014V11.0045C10.5859 10.6809 10.3236 10.4186 10 10.4186Z" fill="white"></path>
          <path d="M13.5156 10.4186C13.192 10.4186 12.9297 10.6809 12.9297 11.0045V15.3014C12.9297 15.625 13.192 15.8873 13.5156 15.8873C13.8392 15.8873 14.1016 15.625 14.1016 15.3014V11.0045C14.1015 10.6809 13.8392 10.4186 13.5156 10.4186Z" fill="white"></path>
        </g>
        <defs>
          <clipPath id="clip0_2_75">
            <rect width="20" height="20" fill="white"></rect>
          </clipPath>
        </defs>
      </svg>
  </a>
  `;
  const btnLogIn = button({
    tag: "a",
    text: "Tài Khoản",
    href: "/dashboard",
  });
  const btnLogOut = button({
    tag: "a",
    text: "Đăng xuất",
  });
  btnLogOut.addEventListener("click", async () => {
    try {
      await Authentication.LogOut();
      location.href = "/login";
    } catch (error) {
      console.log(error);
    }
  });
  header_TopBar_Container_User.querySelector(".login").appendChild(btnLogIn);
  header_TopBar_Container_User
    .querySelector(".register")
    .appendChild(btnLogOut);
  return header_TopBar_Container_User;
};
const NotLoggedIn = () => {
  const header_TopBar_Container_User = document.createElement("div");
  header_TopBar_Container_User.className = "header_TopBar_Container_User";
  header_TopBar_Container_User.innerHTML = `
        <a href="/profile" style="left : -30px" data-link><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M11.8575 11.6341C13.181 11.6341 14.327 11.1594 15.2635 10.2228C16.1998 9.28636 16.6747 8.14058 16.6747 6.81689C16.6747 5.49365 16.2 4.34771 15.2634 3.41098C14.3268 2.4747 13.1809 2 11.8575 2C10.5338 2 9.388 2.4747 8.45157 3.41113C7.51514 4.34756 7.04028 5.49349 7.04028 6.81689C7.04028 8.14058 7.51514 9.28652 8.45157 10.2229C9.3883 11.1592 10.5342 11.6341 11.8575 11.6341V11.6341ZM9.28042 4.23983C9.99896 3.5213 10.8418 3.17203 11.8575 3.17203C12.8729 3.17203 13.716 3.5213 14.4347 4.23983C15.1532 4.95852 15.5026 5.80157 15.5026 6.81689C15.5026 7.83251 15.1532 8.6754 14.4347 9.39409C13.716 10.1128 12.8729 10.4621 11.8575 10.4621C10.8422 10.4621 9.99926 10.1126 9.28042 9.39409C8.56173 8.67556 8.21231 7.83251 8.21231 6.81689C8.21231 5.80157 8.56173 4.95852 9.28042 4.23983Z" fill="white"></path>
        <path d="M20.2863 17.379C20.2592 16.9893 20.2046 16.5642 20.1242 
        16.1153C20.043 15.663 19.9385 15.2354 19.8134 14.8447C19.684 14.4408 19.5084 14.0419 19.2909 13.6597C19.0656 13.2629 18.8007 12.9175 18.5034 12.6332C18.1926 12.3358 17.812 12.0967 17.372 11.9223C16.9334 11.7488 16.4475 11.6609 15.9276 11.6609C15.7234 11.6609 15.526 11.7447 15.1447 11.9929C14.91 12.146 14.6355 12.323 14.3291 12.5188C14.0671 12.6857 13.7122 12.8421 13.2738 12.9837C12.8461 13.1221 12.4118 13.1923 11.983 13.1923C11.5546 13.1923 11.1203 13.1221 10.6923 12.9837C10.2544 12.8423 9.89931 12.6859 9.63778 12.5189C9.33428 12.325 9.05962 12.148 8.82143 11.9928C8.44042 11.7445 8.24297 11.6608 8.03881 11.6608C7.51879 11.6608 7.03295 11.7488 6.59457 11.9225C6.15481 12.0966 5.77411 12.3357 5.46298 12.6334C5.16574 12.9178 4.90085 13.2631 4.67563 13.6597C4.45849 14.0419 4.28271 14.4406 4.15332 14.8448C4.02835 15.2356 3.92383 15.663 3.84265 16.1153C3.76208 16.5636 3.70761 16.9888 3.6806 17.3794C3.65405 17.7614 3.64062 18.1589 3.64062 18.5605C3.64062 19.6045 3.9725 20.4497 4.62695 21.073C5.27331 21.6881 6.12841 21.9999 7.1686 21.9999H16.7987C17.8386 21.9999 18.6937 21.6881 19.3402 21.073C19.9948 20.4501 20.3267 19.6046 20.3267 18.5603C20.3265 18.1573 20.313 17.7598 20.2863 17.379V17.379ZM18.5321 20.2238C18.105 20.6303 17.538 20.8279 16.7986 20.8279H7.1686C6.42901 20.8279 5.862 20.6303 5.43506 20.224C5.0162 19.8253 4.81265 19.281 4.81265 18.5605C4.81265 18.1857 4.82501 17.8157 4.84973 17.4605C4.87384 17.112 4.92312 16.7291 4.99621 16.3223C5.06839 15.9206 5.16025 15.5435 5.2695 15.2022C5.37433 14.8749 5.5173 14.5508 5.69461 14.2386C5.86383 13.941 6.05853 13.6858 6.27337 13.4801C6.47433 13.2877 6.72763 13.1302 7.02609 13.0121C7.30212 12.9028 7.61233 12.843 7.94909 12.834C7.99013 12.8558 8.06322 12.8975 8.18163 12.9747C8.42257 13.1317 8.70028 13.3108 9.00728 13.5069C9.35335 13.7276 9.79921 13.9268 10.3319 14.0988C10.8765 14.2749 11.4319 14.3643 11.9832 14.3643C12.5345 14.3643 13.0901 14.2749 13.6344 14.099C14.1675 13.9267 14.6132 13.7276 14.9597 13.5066C15.2739 13.3058 15.5438 13.1319 15.7848 12.9747C15.9032 12.8976 15.9763 12.8558 16.0173 12.834C16.3542 12.843 16.6644 12.9028 16.9406 13.0121C17.2389 13.1302 17.4922 13.2878 17.6932 13.4801C17.908 13.6856 18.1027 13.9409 18.2719 14.2387C18.4494 14.5508 18.5925 14.875 18.6972 15.202C18.8066 15.5438 18.8986 15.9207 18.9706 16.3222C19.0436 16.7297 19.093 17.1127 19.1171 17.4606V17.4609C19.142 17.8148 19.1545 18.1846
         19.1547 18.5605C19.1545 19.2811 18.951 19.8253 18.5321 20.2238V20.2238Z" fill="white">
        </path>
      </svg></a>
        <div class="login"></div>
        <span style="color: aliceblue; margin: 0 3px; font-size: 18px"
          >/</span
        >
        <div class="register"></div>
      <div
        style="
          width: 1px;
          height: 22px;
          background-color: #fff;
          margin : 0 10px
        "
      ></div>
        <a href="/cart" style="left:165px" data-link>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <g clip-path="url(#clip0_2_75)">
                <path d="M19.7031 7.22905C19.439 6.89772 19.0428 6.70764 18.616 6.70764H14.7643L12.6756 1.9251C12.5461 1.62858 12.2007 1.49307 11.9042 1.62264C11.6076 1.75213 11.4722 2.09756 11.6017 2.39412L13.4855 6.70768H6.51449L8.39828 2.39412C8.52778 2.09756 8.39238 1.75217 8.09582 1.62264C7.7993 1.49307 7.45387 1.6285 7.32438 1.9251L5.23574 6.70768H1.38403C0.957229 6.70768 0.561018 6.89772 0.296916 7.22909C0.0376587 7.5544 -0.0580053 7.9726 0.0344556 8.37659L2.09137 17.361C2.235 17.9883 2.78996 18.4264 3.44094 18.4264H16.5591C17.21 18.4264 17.765 17.9883 17.9086 17.361L19.9655 8.37655C20.058 7.97256 19.9623 7.55436 19.7031 7.22905ZM16.5591 17.2545H3.44094C3.34145 17.2545 3.2543 17.1893 3.23371 17.0994L1.1768 8.11506C1.16067 8.04456 1.18774 7.99151 1.21336 7.95944C1.23711 7.9296 1.2909 7.87956 1.38403 7.87956H4.72399L4.57051 8.231C4.44102 8.52757 4.57641 8.87296 4.87297 9.00249C4.9493 9.03585 5.02883 9.05163 5.10715 9.05163C5.33301 9.05163 5.54824 8.92026 5.64442 8.70007L6.00274 7.87964H13.9973L14.3557 8.70007C14.4518 8.9203 14.6671 9.05163 14.8929 9.05163C14.9712 9.05163 15.0508 9.03585 15.1271 9.00249C15.4237 8.87299 15.5591 8.52757 15.4296 8.231L15.2761 7.87956H18.6161C18.7092 7.87956 18.763 7.9296 18.7867 7.95944C18.8123 7.99155 18.8394 8.0446 18.8233 8.11503L16.7664 17.0994C16.7457 17.1893 16.6586 17.2545 16.5591 17.2545Z" fill="white"></path>
                <path d="M6.48438 10.4186C6.16078 10.4186 5.89844 10.6809 5.89844 11.0045V15.3014C5.89844 15.625 6.16078 15.8873 6.48438 15.8873C6.80797 15.8873 7.07031 15.625 7.07031 15.3014V11.0045C7.07031 10.6809 6.80801 10.4186 6.48438 10.4186Z" fill="white"></path>
                <path d="M10 10.4186C9.67641 10.4186 9.41406 10.6809 9.41406 11.0045V15.3014C9.41406 15.625 9.67641 15.8873 10 15.8873C10.3236 15.8873 10.5859 15.625 10.5859 15.3014V11.0045C10.5859 10.6809 10.3236 10.4186 10 10.4186Z" fill="white"></path>
                <path d="M13.5156 10.4186C13.192 10.4186 12.9297 10.6809 12.9297 11.0045V15.3014C12.9297 15.625 13.192 15.8873 13.5156 15.8873C13.8392 15.8873 14.1016 15.625 14.1016 15.3014V11.0045C14.1015 10.6809 13.8392 10.4186 13.5156 10.4186Z" fill="white"></path>
              </g>
              <defs>
                <clipPath id="clip0_2_75">
                  <rect width="20" height="20" fill="white"></rect>
                </clipPath>
              </defs>
            </svg>
        </a>
  `;
  const btnLogIn = button({
    tag: "a",
    text: "Đăng Nhập",
    href: "/login",
  });
  const btnRegister = button({
    tag: "a",
    text: "Đăng Ký",
    href: "/register",
  });
  header_TopBar_Container_User.querySelector(".login").appendChild(btnLogIn);
  header_TopBar_Container_User
    .querySelector(".register")
    .appendChild(btnRegister);
  return header_TopBar_Container_User;
};
export const header = async () => {
  const headerElement = document.createElement("header");
  headerElement.id = "DefaultLayout_Header";
  headerElement.innerHTML = `
    <div class="header_TopBar" style="width: 100%">
      <div class="header_TopBar_Container">
      <div class="header_TopBar_Container_Logo">
      <a href="/" aria-label="Read more about Seminole tax hike">
      <img src="./images/logo.webp" alt="" />
        
      </a>
    </div>
    <div class="header_TopBar_Container_Search">
      <form action="">
        <div class="search-Item header_TopBar_Container_Search-text">
          Tất cả
        </div>
        <div
          class="search-Item header_TopBar_Container_Search-input"
          style="width: 100%"
        >
          <input type="text" placeholder="Tìm sản phẩm bạn mong muốn" />
        </div>
        <div class="search-Item header_TopBar_Container_Search-icon">
        <svg xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"><path d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79
           326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 
           119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z">
          </path></svg>
        </div>
      </form>
    </div>
      </div>
    </div>
  `;
  const userLogin = await User.getLoggedInUser()
    .then((user) => {
      headerElement
        .querySelector(".header_TopBar_Container")
        .appendChild(LoggedIn());
    })
    .catch(() => {
      headerElement
        .querySelector(".header_TopBar_Container")
        .appendChild(NotLoggedIn());
    });
  return headerElement;
};
